<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Product Manager</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; max-width: 900px; margin: auto; }
  input, select { padding: 6px; margin: 5px 0; width: 100%; box-sizing: border-box; }
  label { margin-top: 10px; display: block; font-weight: bold; }
  button { margin-top: 10px; padding: 10px 20px; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  img { max-width: 80px; max-height: 50px; }
  .action-btn { cursor: pointer; color: red; font-weight: bold; }
</style>
</head>
<body>

<h2>Product Manager</h2>

<form id="productForm">
  <input type="hidden" id="productId" value="" />

  <label for="name">Product Name</label>
  <input type="text" id="name" required />

  <label for="price">Price (10-600)</label>
  <input type="number" id="price" min="10" max="600" required />

  <label for="pictureUrl">Picture URL</label>
  <input type="url" id="pictureUrl" required />

  <label for="category">Category</label>
  <select id="category" required>
    <option value="">-- Select Category --</option>
    <option>Audio</option>
    <option>Wearables</option>
    <option>Electronics</option>
    <option>Photography</option>
    <option>Gaming</option>
    <option>Accessories</option>
    <option>Storage</option>
    <option>Home Appliances</option>
    <option>Smart Home</option>
    <option>Personal Care</option>
    <option>Kitchen Appliances</option>
    <option>Automotive</option>
  </select>

  <button type="submit" id="addBtn">Add</button>
  <button type="button" id="updateBtn" disabled>Update</button>
</form>

<button id="loadBtn" style="margin-top: 20px;">Load Products</button>

<table id="productTable" style="display:none;">
  <thead>
    <tr>
      <th>Id</th>
      <th>Name</th>
      <th>Price</th>
      <th>Picture</th>
      <th>Category</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
  let products = [];
  let currentId = 1;

  const form = document.getElementById('productForm');
  const productIdInput = document.getElementById('productId');
  const nameInput = document.getElementById('name');
  const priceInput = document.getElementById('price');
  const pictureUrlInput = document.getElementById('pictureUrl');
  const categorySelect = document.getElementById('category');
  const addBtn = document.getElementById('addBtn');
  const updateBtn = document.getElementById('updateBtn');
  const loadBtn = document.getElementById('loadBtn');
  const table = document.getElementById('productTable');
  const tableBody = table.querySelector('tbody');

  function renderTable() {
    tableBody.innerHTML = '';
    if (products.length === 0) {
      table.style.display = 'none';
      return;
    }
    table.style.display = 'table';
    products.forEach(p => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${p.id}</td>
        <td>${p.name}</td>
        <td>$${p.price}</td>
        <td><img src="${p.pictureUrl}" alt="${p.name}" /></td>
        <td>${p.category}</td>
        <td>
          <button class="editBtn" data-id="${p.id}">Edit</button>
          <button class="deleteBtn" data-id="${p.id}">‚ùå</button>
        </td>
      `;
      tableBody.appendChild(tr);
    });
    addEditDeleteListeners();
  }

  function addEditDeleteListeners() {
    document.querySelectorAll('.editBtn').forEach(btn => {
      btn.onclick = () => {
        const id = parseInt(btn.getAttribute('data-id'));
        const product = products.find(p => p.id === id);
        if (product) {
          productIdInput.value = product.id;
          nameInput.value = product.name;
          priceInput.value = product.price;
          pictureUrlInput.value = product.pictureUrl;
          categorySelect.value = product.category;
          addBtn.disabled = true;
          updateBtn.disabled = false;
        }
      };
    });

    document.querySelectorAll('.deleteBtn').forEach(btn => {
      btn.onclick = () => {
        const id = parseInt(btn.getAttribute('data-id'));
        products = products.filter(p => p.id !== id);
        if (productIdInput.value == id) {
          resetForm();
        }
        renderTable();
      };
    });
  }

  function resetForm() {
    productIdInput.value = '';
    nameInput.value = '';
    priceInput.value = '';
    pictureUrlInput.value = '';
    categorySelect.value = '';
    addBtn.disabled = false;
    updateBtn.disabled = true;
  }

  form.onsubmit = e => {
    e.preventDefault();

    const name = nameInput.value.trim();
    const price = parseFloat(priceInput.value);
    const pictureUrl = pictureUrlInput.value.trim();
    const category = categorySelect.value;

    if (!name || !category || !pictureUrl || isNaN(price) || price < 10 || price > 600) {
      alert('Please fill all fields correctly. Price must be between 10 and 600.');
      return;
    }

    // Add new product
    products.push({
      id: currentId++,
      name,
      price,
      pictureUrl,
      category,
    });

    resetForm();
    alert('Product added! Click "Load Products" to see the list.');
  };

  updateBtn.onclick = () => {
    const id = parseInt(productIdInput.value);
    const index = products.findIndex(p => p.id === id);
    if (index === -1) {
      alert('Product not found');
      return;
    }

    const name = nameInput.value.trim();
    const price = parseFloat(priceInput.value);
    const pictureUrl = pictureUrlInput.value.trim();
    const category = categorySelect.value;

    if (!name || !category || !pictureUrl || isNaN(price) || price < 10 || price > 600) {
      alert('Please fill all fields correctly. Price must be between 10 and 600.');
      return;
    }

    products[index] = { id, name, price, pictureUrl, category };
    resetForm();
    alert('Product updated! Click "Load Products" to see the changes.');
  };

  loadBtn.onclick = () => {
    renderTable();
  };

</script>

</body>
</html>


